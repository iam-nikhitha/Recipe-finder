<!-- HTML start -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--Bootstrap-->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <!-- document links -->
    <!-- <link rel="stylesheet" href="./assets/css/reset.css" />
    <link rel="stylesheet" href="./assets/css/style.css" /> -->
    <!-- document fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- document title (assists with SEO) -->
    <title>
      Ever wondered what you can cook with ingredients left in your fridge or
      pantry?
    </title>

    <style>
      
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: 'Barlow Condensed', sans-serif;
          background-color: #2b2b2b;
          color: #f5f5f5;
          line-height: 1.6;
        }

        header {
          background-color: #3a3a3a;
          padding: 20px;
        }

        .nav-container {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .logo {
          font-size: 24px;
          color: #f39c12;
        }

        nav ul {
          display: flex;
          list-style-type: none;
        }

        nav ul li {
          margin-left: 20px;
        }

        nav ul li a {
          color: #f5f5f5;
          text-decoration: none;
          transition: color 0.3s;
        }

        nav ul li a:hover {
          color: #f39c12;
        }

        #wrap {
          width: 80%;
          margin: auto;
          padding: 20px;
          color: black;
        }

        #recipe-finder {
          background: #444;
          padding: 20px;
          border-radius: 8px;
          margin-bottom: 20px;
        }

        .recipe-box__field {
          width: calc(100% - 90px);
          padding: 10px;
          border: 1px solid #ccc;
          border-radius: 5px;
          margin-right: 10px;
        }

        .btn {
          background-color: #f39c12;
          color: white;
          border: none;
          padding: 10px 15px;
          border-radius: 5px;
          cursor: pointer;
          transition: background-color 0.3s;
        }

        .btn:hover {
          background-color: #e67e22;
        }

        #fetch-youtube-videos {
          margin-top: 20px;
        }

        #recipe-history-container {
          background: #444;
          padding: 20px;
          border-radius: 8px;
          margin-top: 20px;
        }

        #footer-style {
          background: #3a3a3a;
          text-align: center;
          padding: 10px;
          position: relative;
          bottom: 0;
          width: 100%;
        }

        .footer-container h3 {
          color: #f39c12;
        }

        #recipe-history-list li {
          margin: 10px;
        }
        .dark-mode{
          background-color: black;
          color: white;
        }
        .light-mode{
          background-color: white;
          color: black;
        }
      

    </style>
  </head>
  <!-- top nav section -->
  <body class="dark-mode">
    <header>
      <section class="nav-container">
        <h1 class="logo">RECIPE FINDER</h1>
          <img src="./images/moon1.png" class="dark" width="30px" height="30px" />
        <nav>
          <ul>
            <!-- nav uses ID's to take the user to that section of the page -->
            <li><a href="./Auth/register.html">Register</a></li>
            <li><a href="./Auth/login.html">Login</a></li>
            <li><a href="./index.html">Recipe Finder</a></li>
            <!-- <li><a href="#recipe-history">Previous Recipes</a></li> -->
            <li><a href="./customize.html">Customize Recipes</a></li>
            <li><a href="./new-recipe.html">New Recipes</a></li>
            <li><a href="./feedback.html">Feedback</a></li>
            <li><a href="./calender.html">Calender</a></li>
            <li><a href="./mail.html">Send Mail</a></li>
            <li><a href="./Auth/register.html" id="logoutBtn">Logout</a></li>
          </ul>
        </nav>
      </section>
    </header>
    <main id="wrap">
      <!-- this is the ingredients form -->
      <section id="left-wrap">

        <!-- Search engine-->
        <article  id="recipe-finder">
          <form>
            <!-- <div class="recipe-container"> -->
            <input
              type="text"
              class="recipe-box__field"
              placeholder="Enter Your Ingredients"
              id="form1"
            />
            <!-- <input
              type="text"
              class="recipe-box__field"
              placeholder="Second Ingredient"
              id="form2"
            />
            <input
              type="text"
              class="recipe-box__field"
              placeholder="Third Ingredient"
              id="form3"
            /> -->
            <div class="modal" id="myModal" style="width: 30%; cursor: pointer; margin: 200px; ">
              <div class="modal-content">
              <span class="close">&times;</span>
              <p>No results found - please try entering some new ingredients</p>
            </div>
            </div>
            <button class="btn" id="searchBtn">Search</button>
          </form>
        </article>

        <!-- Recipe fetch-->

        <div id="fetch-youtube-videos">
          <article>
            <ul id="search-results"></ul>
          </article>
          <!-- recipe click through -->
          <article id="youtube-tutorial" style="color: white;">
            <!--Insert name of selected recipe into this span element-->
            <h2 id="recipe-title"></h2>
            <!--Embed youtube video here here via the src url-->
            <iframe
              id="youtube-video"
              width="100%"
              height="315"
              title="YouTube video player"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            ></iframe>
            <!--Insert previously selected ingredients into this span element-->
            <p style="color: white;">
              This recipe will be a great way to use up your leftover ingredients.
              <span id="selected-ingredients"></span>
            </p>
          </article>
        </div>
        
        <!-- recipe history -->
        <article id="recipe-history-container">
          <h2>RECIPE HISTORY</h2>
          <div id="recipe-history" ></div>
          <ul id="recipe-history-list">
          </ul>
          <button class="btn" id="clearBtn">Clear recipe history</button>
        </article>
      </section>


      <!-- results -->
      

    </main>
    <br />
    <br />
    <!-- footer of the site -->
    <footer id="footer-style">
      <div class="footer-container">
          <h3>&copy; 2024</h3>
      </div>
    </footer>
    <!--Bootstrap-->
    <scripts
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript" src="./assets/js/script.js"></script>
    
    <script>
      const userTheme = localStorage.getItem("mode")
      console.log(userTheme)
      const userEmail = localStorage.getItem("userEmail")
      console.log(userEmail)
      var dark = document.querySelector('.dark');
      var body = document.querySelector('body')

      body.classList.add(userTheme)

    dark.addEventListener("click",(e)=>{
      console.log("working")
        if(body.classList.contains("dark-mode")){
            body.classList.remove("dark-mode");
            localStorage.setItem("mode","light-mode")
            dark.src = "./images/sun.png"
            body.classList.add("light-mode")
        }else{
            body.classList.remove("light-mode");
            localStorage.setItem("mode","dark-mode")
            dark.src = "./images/moon1.png";
            body.classList.add("dark-mode");
        }
    })



    function checkAuth() {
        const token = localStorage.getItem('accessToken');
        const loginLink = document.querySelector('a[href="./Auth/login.html"]');
        const registerLink = document.querySelector('a[href="./Auth/register.html"]');
        const index = document.querySelector('a[href="./index.html"]')
        const customize = document.querySelector('a[href="./customize.html"]')
        const new_recipe = document.querySelector('a[href="./new-recipe.html"]')
        const feedback = document.querySelector('a[href="./feedback.html"]')
        const calender = document.querySelector('a[href="./calender.html"]')
        const mail = document.querySelector('a[href="./mail.html"]')
        const logoutBtn = document.getElementById('logoutBtn');

        if (token) {
            loginLink.style.display = 'none'; 
            registerLink.style.display = 'none'; 
            index.style.display = "block";
            customize.style.display = "block";
            new_recipe.style.display = "block";
            feedback.style.display = "block";
            calender.style.display = "block";
            mail.style.display = "block";
            logoutBtn.style.display = 'block'; 
           
        } else {
            loginLink.style.display = 'block'; 
            registerLink.style.display = 'block'; 
            index.style.display = "none";
            customize.style.display = "none";
            new_recipe.style.display = "none";
            feedback.style.display = "none";
            calender.style.display = "none";
            mail.style.display = "none";
            logoutBtn.style.display = 'none'; 
        }
        }

        function logout() {
        localStorage.removeItem('accessToken');
        checkAuth();
        }

        document.addEventListener('DOMContentLoaded', () => {
        checkAuth();

        const logoutBtn = document.getElementById('logoutBtn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', logout);
        }
        });



    </script>
  </body>
</html>
